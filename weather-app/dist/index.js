(()=>{"use strict";function t(t,e,i,a){const s=document.createElement(t);return Array.isArray(e)?e.forEach((t=>s.classList.add(t))):t&&s.classList.add(e),i&&(s.innerText=i),a&&s.setAttribute("id",a),s}const e=new class{constructor(t){this.root=document.querySelector(t),this.bgImgDispatch={Clouds:"clouds.jpg",Clear:"clear.jpg",Snow:"snow.jpg"}}createCard({type:e,city:i,degree:a}){const s=t("div","card");return[t("div","type",e),t("div","city",i),t("div","degree",a)].forEach((t=>s.appendChild(t))),s}insertCard=t=>{const e=this.createCard(t);this.root.innerHTML="",this.root.appendChild(e)};changeBackground(t){t in this.bgImgDispatch&&(document.body.style.backgroundImage=`url(images/${this.bgImgDispatch[t]})`,document.body.style.backgroundSize="1920px 1080px")}}("#root"),i=new class{constructor(t,e){this.view=t,this.inputElement=document.querySelector(e),this.API_KEY="0e53e87f32b3455f4c4a3fec3c04c53b",this.initialStateDone=!1}async submitCity(t){if(t===this.lastCity)return;const e=await this.fetchData(t),i={city:e.name,type:e.weather[0].main,degree:e.main.temp};this.lastCity=i.city,this.view.changeBackground(i.type),this.view.insertCard(i)}async fetchData(t){const e=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${t}&APPID=${this.API_KEY}&units=metric`);if(!e.ok)throw new Error(`Problem in fetch in ${t}`);return e.json()}initialState(t="Ankara"){this.initialStateDone||(this.submitCity(t),this.lastCity=t,this.initialStateDone=!0)}async doSearch(){this.submitCity(this.inputElement.value)}}(e,"#search-city-input");document.getElementById("search-city-form").addEventListener("submit",(t=>{t.preventDefault(),i.doSearch()})),i.initialState()})();